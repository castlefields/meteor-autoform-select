<template name="afOafSelect">
  <div {{atts}}>
    <select style="display: none !important" {{atts}}>
      {{#each selectedItems}}
        <option selected="selected" value="{{this.value}}">{{this.label}}</option>
      {{/each}}
    </select>
    <div class="oafselect-input-wrapper {{#if showDropdown}}dropdown-visible{{/if}}">
      {{#each selectedItems}}
        <div class="oafselect-selected-item" data-label="{{label}}" data-value="{{value}}">
          {{#if options.templates.selectedItem}}
            {{> UI.dynamic template=options.templates.selectedItem data=this}}
          {{else}}
            <span class="name">{{label}}</span> <a href="" class="remove">&times;</a>
          {{/if}}
        </div>
      {{/each}}
      <input type="text" class="oafselect-input" value="{{searchValue}}" placeholder="{{placeholder}}" />
    </div>
    <div class="oafselect-dropdown {{#if showDropdown}}visible{{/if}}">
      {{#each dropdownItems}}
        {{#if this.options}}
          <div class="oafselect-dropdown-group">
            {{#if options.templates.dropdownGroup}}
              {{> UI.dynamic template=options.templates.dropdownGroup data=this}}
            {{else}}
              <div class="group name">{{this.optgroup}}</div>
              {{#each this.options}}
                <div class="oafselect-dropdown-item {{#if indexMatch}}active{{/if}}" data-label="{{label}}" data-value="{{value}}">
                  {{#if options.templates.dropdownItem}}
                    {{> UI.dynamic template=options.templates.dropdownItem data=this}}
                  {{else}}
                    <span class="name">{{label}}</span>
                  {{/if}}
                </div>
              {{/each}}
            {{/if}}
          </div>
        {{else}}
          <div class="oafselect-dropdown-item {{#if indexMatch}}active{{/if}}" data-label="{{label}}" data-value="{{value}}">
            {{#if options.templates.dropdownItem}}
              {{> UI.dynamic template=options.templates.dropdownItem data=this}}
            {{else}}
              <span class="name">{{label}}</span>
            {{/if}}
          </div>
        {{/if}}
      {{/each}}
      {{#if options.create}}
        {{#if searchValue}}
          <div class="oafselect-dropdown-item create">
            <span class="text">{{options.createText}}</span> <span class="value">{{searchValue}}</span>
          </div>
        {{/if}}
      {{/if}}
    </div>
  </div>
</template>
